<navbar></navbar>

<div class="content-wrapper">
  <div class="container content">
    <div class="row page-title">
      <div class="col-sm-12" style="padding: 0 50px;">
        <div class="page-header">
          <h1>{{vm.pageTitle}}</h1>
          <span class="subheader" ng-show="vm.plan.patient">{{vm.plan.patient.name.first}} {{vm.plan.patient.name.last}}'s Wellness Plan</span>
        </div>
      </div>
    </div><!-- .page-title -->

    <div class="row patient-info" ng-show="vm.plan.patient">
      <div class="col-md-4 ">
        <h3>Patient Info</h3>
        <span class="patient-info">Name: {{vm.plan.patient.name.first}}  {{vm.plan.patient.name.last}}</span> <br>
        <span class="patient-info">Date Of Birth: {{vm.plan.patient.dob}}</span>
        <hr>
      </div>
      <div class="col-md-4 col-md-offset-4">
        <button class="btn btn-lg btn-seasons" ng-show="!vm.viewing" ng-click="vm.viewing=true">View Plan</button>
        <button class="btn btn-lg btn-seasons" ng-show="vm.viewing" ng-click="vm.viewing=false">Edit Plan</button>
        <button class="btn btn-lg btn-seasons" ng-click="vm.getLatestTemplate()">Test</button>

      </div>
    </div>  <!-- End Patient Info -->

    <div class="row" id="plan-wrapper" ng-show="vm.viewing">
      <div class="controls" style="margin: 0 auto 30px auto; text-align: center;"> <a href="" ng-click="vm.previousPage()">Prev</a> | <a href="" ng-click="vm.nextPage()">Next</a></div>
      <div class="section-wrapper" ng-repeat="section in vm.templateSections | orderBy:'order'">
        <div class="plan-page">
          <div class="plan-page-body">
            <h2 class="plan-page-title" ng-bind-html="section.title"></h2>
            <div class="plan-page-content" ng-bind-html="section.html"></div>
          </div>
        </div>
      </div>
    </div><!-- End Plan View Wrapper -->
    <plan-preview ng-show="vm.viewing"></plan-preview>


    <div class="row" id="plan-edit-wrapper" ng-show="vm.plan.patient && !vm.viewing">
      <div class="sidebar">
        <ul>
          <li ng-repeat="section in vm.templateSections | orderBy:'order'">
            <a href="#" ng-class="{active : vm.templateSection === section}" ng-click="vm.setSection(section)">{{section.title}}</a>
          </li>
        </ul>
      </div>
      <div class="body">
        <plan-editor ng-show="vm.templateSection" data-section="{section}"></plan-editor>

        <h4 ng-show="!vm.templateSection.is_editable && !vm.templateSection.has_extras">
          Nothing to do here.  <subtext>Push to preview?<subtext>
        </h4>
      </div>
    </div> <!-- End Plan Edit Wrapper -->

    <div class="row footer-wrapper">
      <footer></footer>
    </div>
  </div>
</div>
