<navbar></navbar>
<div class="content-wrapper" >
  <div class="container content">
    <div class="row page-title">
      <!-- 
      This page is not used at this time.  
      It would serve as the list of plans for a user,
      but we do that already on the dashboard.
      -->
    </div><!-- .page-title -->

    <div class="row patient-info" ng-show="vm.plan.patient">
      <!-- there's no patient info on this page! -->
    </div>  <!-- End Patient Info -->

    <div id="plans-table" class="row" ng-hide="vm.plan.patient">
      <div class="col-sm-12" ng-show="vm.myPlans.length > 0">
        <table class="table table-bordered table-striped table-condensed table-hover table-responsive">
            <thead>
              <th>Patient Name</th>
              <th>Date Of Birth</th>
              <th>Created</th>
              <th colspan="3">Options</th>
            </thead>
            <tbody>
              <tr ng-repeat="plan in vm.myPlans">
                <td><a href="#" ng-click="vm.editPlan(plan)">{{plan.patient.name.last}}, {{plan.patient.name.first}}</a></td>
                <td>{{plan.patient.dob}}</td>
                <td><span am-time-ago="plan.created_at"></span></td>
                <td style="text-align: center;"><i class="fa fa-trash trash" ng-click="vm.deletePlan(plan)"></i></td>
              </tr>
            </tbody>
          </table>
      </div>
      <div class="col-sm-12" ng-hide="vm.myPlans.length > 0">
        <h5 style="text-align: center;">You have not created any plans.</h5>
        <h5 style="text-align: center;">Enter a patient's details below to create your first plan!</h5>
      </div>
    </div> <!-- End Plans Table -->

    <div id="new-plan-form" class="row" ng-hide="vm.plan.patient">
      <div class="col-sm-12 col-md-6">
        <div class="row">
          <form class="plan-form" name="planForm" ng-submit="vm.addPlan(planForm)" novalidate>
            <div class="form-group col-sm-4" ng-class="planForm.firstname.$error.required && vm.submitted ? 'has-error' : ''">
              <input type="text" class="form-control" name="firstname" placeholder="First Name" ng-model="vm.newPlan.firstname"  required>
            </div>
            <div class="form-group col-sm-4" ng-class="planForm.lastname.$error.required && vm.submitted ? 'has-error' : ''">
              <input type="text" class="form-control" name="lastname" placeholder="Last Name" ng-model="vm.newPlan.lastname"  required>
            </div>
            <div class="form-group col-sm-4" ng-class="planForm.dob.$error.required && vm.submitted ? 'has-error' : ''" required>
              <input type="text" class="form-control" name="dob" placeholder="DOB" ng-model="vm.newPlan.dob" required>
            </div>
            <div class="form-group col-sm-12">
              <textarea class="form-control" placeholder="Notes" ng-model="vm.newPlan.notes"></textarea>
            </div>

            <div class="form-group has-error">
              <div class="col-sm-12">
                <p class="help-block" ng-show="planForm.firstname.$error.required && vm.submitted">
                   Please enter a first name
                </p>
                <p class="help-block" ng-show="planForm.lastname.$error.required && vm.submitted">
                   Please enter a last name
                </p>
                <p class="help-block" ng-show="planForm.dob.$error.required && vm.submitted">
                   Please enter a date of birth
                </p>

                <p class="help-block">{{ vm.errors.other }}</p>
              </div>
            </div>
            <div class="col-sm-12">
              <button type="submit" class="btn btn-primary">Add New</button>
            </div>
          </form>
        </div>
      </div>
    </div> <!-- End New Plan Form -->
    
    <div class="row footer-wrapper">
      <footer></footer>
    </div>
  </div>
</div>